import{a2 as c,x as p,y as h}from"./runtime-core.esm-bundler.d90b5eb8.js";function g(n){let i=c(),r=n.subscribe(t=>{i.value=t});return p()&&h(r),i}let l=[],f=(n,i)=>{let r=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},l:i||0,lc:0,listen(s,u){return t.lc=r.push(s,u||t.l)/2,()=>{let e=r.indexOf(s);~e&&(r.splice(e,2),t.lc--,t.lc||t.off())}},notify(s){let u=!l.length;for(let e=0;e<r.length;e+=2)l.push(r[e],t.value,s,r[e+1]);if(u){for(let e=0;e<l.length;e+=4){let a=!1;for(let o=e+7;o<l.length;o+=4)if(l[o]<l[e+3]){a=!0;break}a?l.push(l[e],l[e+1],l[e+2],l[e+3]):l[e](l[e+1],l[e+2])}l.length=0}},off(){},set(s){t.value!==s&&(t.value=s,t.notify())},subscribe(s,u){let e=t.listen(s,u);return s(t.value),e},value:n};return t};const v=f([]),x=f(0);export{x as a,v as p,g as u};
